@{
    ViewData["Title"] = "Search";
}

@using Microsoft.AspNetCore.Identity
@using NewsPress.Areas.Identity.Data
@inject SignInManager<Author> SignInManager
@inject UserManager<Author> UserManager

<h1>Searching :@ViewBag.searchbar</h1>
<br />



@foreach (var article in ViewBag.SearchedTitleArticleList)
{
    if (SignInManager.IsSignedIn(User) && (article.AuthorId == UserManager.GetUserAsync(User).Result.Id || UserManager.GetUserAsync(User).Result.admin == true))
    {
        <a style="color: inherit; text-decoration: none;" href="/Article/Details/@article.Id">
            <div class="parentspace">
                <div class="parentspace">
                    <div style="margin-right:10px">
                        <img height="100" width="100" src="~/Images/@article.PictureName" />
                    </div>
                    <div>
                        @if (article.status == 0)
                        {
                            <h2> <i>Draft : @article.Title</i></h2>
                        }
                        else if (article.status == 1)
                        {
                            <h2> @article.Title</h2>
                        }
                        else
                        {
                            <h2><i>Archived : @article.Title</i></h2>
                        }
                        <p>
                            @if (article.Text.Length < 100)
                            {
                                @article.Text;
                            }
                            else
                            {
                                @article.Text.Substring(0, 100);
                            }
                            ...
                        </p>
                    </div>
                </div>
                <div>
                    <p>@(article.WrittenDate.ToString("dd MMMM")) @article.WrittenDate.ToString("HH:mm")</p>
                </div>
            </div>
            <hr />
        </a>
    }
    else if (article.status == 1)
    {
        <a style="color: inherit; text-decoration: none;" href="/Article/Details/@article.Id">
            <div class="parentspace">
                <div class="parentspace">
                    <div style="margin-right:10px">
                        <img height="100" width="100" src="~/Images/@article.PictureName" />
                    </div>
                    <div>
                        <h2> @article.Title</h2>
                        <p>

                            @if (article.Text.Length < 100)
                            {
                                @article.Text;
                            }
                            else
                            {
                                @article.Text.Substring(0, 100);
                            }
                            ...
                        </p>
                    </div>
                </div>
                <div>
                    <p>@(article.WrittenDate.ToString("dd MMMM")) @article.WrittenDate.ToString("HH:mm")</p>
                </div>
            </div>
            <hr />
        </a>
    }


}
@foreach (var article in ViewBag.SearchedTextArticleList)
{
    if (SignInManager.IsSignedIn(User) && (article.AuthorId == UserManager.GetUserAsync(User).Result.Id || UserManager.GetUserAsync(User).Result.admin == true))
    {
        <a style="color: inherit; text-decoration: none;" href="/Article/Details/@article.Id">
            <div class="parentspace">
                <div class="parentspace">
                    <div style="margin-right:10px">
                        <img height="100" width="100" src="~/Images/@article.PictureName" />
                    </div>
                    <div>
                        @if (article.status == 0)
                        {
                            <h2> <i>Draft : @article.Title</i></h2>
                        }
                        else if (article.status == 1)
                        {
                            <h2> @article.Title</h2>
                        }
                        else
                        {
                            <h2><i>Archived : @article.Title</i></h2>
                        }
                        <p>
                            @if (article.Text.Length < 100)
                            {
                                @article.Text;
                            }
                            else
                            {
                                @article.Text.Substring(0, 100);
                            }
                            ...
                        </p>
                    </div>
                </div>
                <div>
                    <p>@(article.WrittenDate.ToString("dd MMMM")) @article.WrittenDate.ToString("HH:mm")</p>
                </div>
            </div>
            <hr />
        </a>
    }
    else if (article.status == 1)
    {
        <a style="color: inherit; text-decoration: none;" href="/Article/Details/@article.Id">
            <div class="parentspace">
                <div class="parentspace">
                    <div style="margin-right:10px">
                        <img height="100" width="100" src="~/Images/@article.PictureName" />
                    </div>
                    <div>
                        <h2> @article.Title</h2>
                        <p>

                            @if (article.Text.Length < 100)
                            {
                                @article.Text;
                            }
                            else
                            {
                                @article.Text.Substring(0, 100);
                            }
                            ...
                        </p>
                    </div>
                </div>
                <div>
                    <p>@(article.WrittenDate.ToString("dd MMMM")) @article.WrittenDate.ToString("HH:mm")</p>
                </div>
            </div>
            <hr />
        </a>
    }


}
